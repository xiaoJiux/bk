"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[474],{8474:function(t,e,r){r.r(e),r.d(e,{default:function(){return w}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"Admin"}},[t.isAdmin?r("div",{staticClass:"yes"},[r("el-tabs",{attrs:{"tab-position":"top"}},[r("el-tab-pane",{attrs:{label:"文章管理"}},[r("AdminArticle")],1),r("el-tab-pane",{attrs:{label:"文章发表"}},[r("AdminArticlePublish")],1),r("el-tab-pane",{attrs:{label:"添加友链"}}),r("el-tab-pane",{attrs:{label:"管理友链"}})],1)],1):r("div",{staticClass:"no"},[t._v(" 您所登录的不是管理员账号， "),r("router-link",{attrs:{to:"/"}},[t._v("返回首页")])],1)])},s=[],n=r(6198),l=(r(8975),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"AdminArticlePublish"}},[r("h3",[t._v("文章发表")]),r("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"status-icon":""}},[r("el-form-item",{attrs:{label:"标题"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.form.des,callback:function(e){t.$set(t.form,"des",e)},expression:"form.des"}})],1),r("el-form-item",{attrs:{label:"md上传"}},[r("br"),r("el-upload",{ref:"mdUpload",staticClass:"md-upload",attrs:{name:"md",action:t.urlBase+"/admin/md","on-success":t.mdUploadSuccess,"file-list":t.mdFileList,"auto-upload":!1}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitMdUpload}},[t._v("上传到服务器 ")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("请上传.md格式的文件")])],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("提交")])],1)],1)],1)}),i=[],o={name:"AdminArticlePublish",data:function(){return{mdFileList:[],form:{title:"",des:"",src:""}}},methods:{submitForm:function(t){var e=this;return(0,n.Z)(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios({method:"post",url:"/admin/article",data:{title:e.form.title,des:e.form.des,src:e.form.src}});case 2:if(r=t.sent,a=r.data,0===a.code){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.$router.push("/article/"+a._id);case 8:case"end":return t.stop()}}),t)})))()},submitMdUpload:function(){this.$refs.mdUpload.submit()},mdUploadSuccess:function(t,e,r){if(console.log(t,e,r),0!==t.code)return this.$message.error(t.msg);this.$message.success("md上传成功"),this.form.src=t.mdSrc}},mounted:function(){}},c=o,d=r(1001),u=(0,d.Z)(c,l,i,!1,null,"2a8ddc54",null),m=u.exports,f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"AdminArticle"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[r("el-table-column",{attrs:{label:"日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("i",{staticClass:"el-icon-time"}),r("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.date))])]}}])}),r("el-table-column",{attrs:{label:"姓名",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-popover",{attrs:{placement:"top",trigger:"hover"}},[r("p",[t._v("姓名: "+t._s(e.row.name))]),r("p",[t._v("住址: "+t._s(e.row.address))]),r("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.name))])],1)])]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑 ")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return t.handleDelete(e.$index,e.row)}}},[t._v("删除 ")])]}}])})],1)],1)},p=[],b={name:"AdminArticle",data:function(){return{tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]}},methods:{handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)}}},h=b,v=(0,d.Z)(h,f,p,!1,null,"497736c5",null),_=v.exports,A={name:"Admin",components:{AdminArticle:_,AdminArticlePublish:m},data:function(){return{isAdmin:!1}},created:function(){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios({method:"post",url:"admin"});case 2:r=e.sent,a=r.data,t.isAdmin=0===a.code;case 5:case"end":return e.stop()}}),e)})))()}},g=A,x=(0,d.Z)(g,a,s,!1,null,"ab7768f0",null),w=x.exports}}]);
//# sourceMappingURL=474-legacy.68291b94.js.map