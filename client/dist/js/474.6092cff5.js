"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[474],{8474:function(t,e,a){a.r(e),a.d(e,{default:function(){return g}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Admin"}},[t.isAdmin?a("div",{staticClass:"yes"},[a("el-tabs",{attrs:{"tab-position":"top"}},[a("el-tab-pane",{attrs:{label:"文章管理"}},[a("AdminArticle")],1),a("el-tab-pane",{attrs:{label:"文章发表"}},[a("AdminArticlePublish")],1),a("el-tab-pane",{attrs:{label:"添加友链"}}),a("el-tab-pane",{attrs:{label:"管理友链"}})],1)],1):a("div",{staticClass:"no"},[t._v(" 您所登录的不是管理员账号， "),a("router-link",{attrs:{to:"/"}},[t._v("返回首页")])],1)])},l=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"AdminArticlePublish"}},[a("h3",[t._v("文章发表")]),a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"status-icon":""}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.form.des,callback:function(e){t.$set(t.form,"des",e)},expression:"form.des"}})],1),a("el-form-item",{attrs:{label:"md上传"}},[a("br"),a("el-upload",{ref:"mdUpload",staticClass:"md-upload",attrs:{name:"md",action:t.urlBase+"/admin/md","on-success":t.mdUploadSuccess,"file-list":t.mdFileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitMdUpload}},[t._v("上传到服务器 ")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("请上传.md格式的文件")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("提交")])],1)],1)],1)},i=[],n={name:"AdminArticlePublish",data(){return{mdFileList:[],form:{title:"",des:"",src:""}}},methods:{async submitForm(t){let{data:e}=await this.$axios({method:"post",url:"/admin/article",data:{title:this.form.title,des:this.form.des,src:this.form.src}});0===e.code&&await this.$router.push("/article/"+e._id)},submitMdUpload(){this.$refs.mdUpload.submit()},mdUploadSuccess(t,e,a){if(console.log(t,e,a),0!==t.code)return this.$message.error(t.msg);this.$message.success("md上传成功"),this.form.src=t.mdSrc}},mounted(){}},o=n,d=a(1001),m=(0,d.Z)(o,r,i,!1,null,"2a8ddc54",null),c=m.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"AdminArticle"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.date))])]}}])}),a("el-table-column",{attrs:{label:"姓名",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"top",trigger:"hover"}},[a("p",[t._v("姓名: "+t._s(e.row.name))]),a("p",[t._v("住址: "+t._s(e.row.address))]),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.name))])],1)])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除 ")])]}}])})],1)],1)},f=[],p={name:"AdminArticle",data(){return{tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]}},methods:{handleEdit(t,e){console.log(t,e)},handleDelete(t,e){console.log(t,e)}}},b=p,h=(0,d.Z)(b,u,f,!1,null,"497736c5",null),_=h.exports,v={name:"Admin",components:{AdminArticle:_,AdminArticlePublish:c},data(){return{isAdmin:!1}},async created(){let{data:t}=await this.$axios({method:"post",url:"admin"});this.isAdmin=0===t.code}},A=v,y=(0,d.Z)(A,s,l,!1,null,"ab7768f0",null),g=y.exports}}]);
//# sourceMappingURL=474.6092cff5.js.map