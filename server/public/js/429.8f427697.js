"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[429],{1429:function(t,e,s){s.r(e),s.d(e,{default:function(){return b}});var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"Admin"}},[t.isAdmin?s("div",{staticClass:"yes"},[s("el-tabs",{attrs:{"tab-position":"top"}},[s("el-tab-pane",{attrs:{label:"文章管理"}}),s("el-tab-pane",{attrs:{label:"文章发表"}},[s("AdminArticlePublish")],1),s("el-tab-pane",{attrs:{label:"添加友链"}}),s("el-tab-pane",{attrs:{label:"管理友链"}})],1)],1):s("div",{staticClass:"no"},[t._v(" 您所登录的不是管理员账号，"),s("router-link",{attrs:{to:"/"}},[t._v("返回首页")])],1)])},a=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"AdminArticlePublish"}},[s("h3",[t._v("文章发表")]),s("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"status-icon":""}},[s("el-form-item",{attrs:{label:"标题"}},[s("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),s("el-form-item",{attrs:{label:"描述"}},[s("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.form.des,callback:function(e){t.$set(t.form,"des",e)},expression:"form.des"}})],1),s("el-form-item",{attrs:{label:"md上传"}},[s("br"),s("el-upload",{ref:"mdUpload",staticClass:"md-upload",attrs:{name:"md",action:t.urlBase+"/admin/md","on-success":t.mdUploadSuccess,"file-list":t.mdFileList,"auto-upload":!1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitMdUpload}},[t._v("上传到服务器 ")]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("请上传.md格式的文件")])],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("提交")])],1)],1)],1)},r=[],o={name:"AdminArticlePublish",data(){return{mdFileList:[],form:{title:"",des:"",src:""}}},methods:{async submitForm(t){let{data:e}=await this.$axios({method:"post",url:"/admin/article",data:{title:this.form.title,des:this.form.des,src:this.form.src}});0===e.code&&await this.$router.push("/article/"+e._id)},submitMdUpload(){this.$refs.mdUpload.submit()},mdUploadSuccess(t,e,s){if(console.log(t,e,s),0!==t.code)return this.$message.error(t.msg);this.$message.success("md上传成功"),this.form.src=t.mdSrc}},mounted(){}},m=o,d=s(1001),n=(0,d.Z)(m,i,r,!1,null,"2a8ddc54",null),c=n.exports,u={name:"Admin",components:{AdminArticlePublish:c},data(){return{isAdmin:!1}},async created(){let{data:t}=await this.$axios({method:"post",url:"admin"});this.isAdmin=0===t.code}},p=u,f=(0,d.Z)(p,l,a,!1,null,"0269ece3",null),b=f.exports}}]);
//# sourceMappingURL=429.8f427697.js.map