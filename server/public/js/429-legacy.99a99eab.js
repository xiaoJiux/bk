"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[429],{1429:function(t,e,r){r.r(e),r.d(e,{default:function(){return h}});var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"Admin"}},[t.isAdmin?r("div",{staticClass:"yes"},[r("el-tabs",{attrs:{"tab-position":"top"}},[r("el-tab-pane",{attrs:{label:"文章管理"}}),r("el-tab-pane",{attrs:{label:"文章发表"}},[r("AdminArticlePublish")],1),r("el-tab-pane",{attrs:{label:"添加友链"}}),r("el-tab-pane",{attrs:{label:"管理友链"}})],1)],1):r("div",{staticClass:"no"},[t._v(" 您所登录的不是管理员账号，"),r("router-link",{attrs:{to:"/"}},[t._v("返回首页")])],1)])},a=[],i=r(6198),n=(r(8975),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"AdminArticlePublish"}},[r("h3",[t._v("文章发表")]),r("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form,"status-icon":""}},[r("el-form-item",{attrs:{label:"标题"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.form.des,callback:function(e){t.$set(t.form,"des",e)},expression:"form.des"}})],1),r("el-form-item",{attrs:{label:"md上传"}},[r("br"),r("el-upload",{ref:"mdUpload",staticClass:"md-upload",attrs:{name:"md",action:t.urlBase+"/admin/md","on-success":t.mdUploadSuccess,"file-list":t.mdFileList,"auto-upload":!1}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitMdUpload}},[t._v("上传到服务器 ")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("请上传.md格式的文件")])],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("提交")])],1)],1)],1)}),l=[],o={name:"AdminArticlePublish",data:function(){return{mdFileList:[],form:{title:"",des:"",src:""}}},methods:{submitForm:function(t){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios({method:"post",url:"/admin/article",data:{title:e.form.title,des:e.form.des,src:e.form.src}});case 2:if(r=t.sent,s=r.data,0===s.code){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.$router.push("/article/"+s._id);case 8:case"end":return t.stop()}}),t)})))()},submitMdUpload:function(){this.$refs.mdUpload.submit()},mdUploadSuccess:function(t,e,r){if(console.log(t,e,r),0!==t.code)return this.$message.error(t.msg);this.$message.success("md上传成功"),this.form.src=t.mdSrc}},mounted:function(){}},u=o,m=r(1001),c=(0,m.Z)(u,n,l,!1,null,"2a8ddc54",null),d=c.exports,f={name:"Admin",components:{AdminArticlePublish:d},data:function(){return{isAdmin:!1}},created:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios({method:"post",url:"admin"});case 2:r=e.sent,s=r.data,t.isAdmin=0===s.code;case 5:case"end":return e.stop()}}),e)})))()}},p=f,b=(0,m.Z)(p,s,a,!1,null,"0269ece3",null),h=b.exports}}]);
//# sourceMappingURL=429-legacy.99a99eab.js.map